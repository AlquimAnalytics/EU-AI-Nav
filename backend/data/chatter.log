2024-11-15 14:23:21,662 - INFO - Logging setup complete.
2024-11-15 14:23:32,812 - INFO - Logging setup complete.
2024-11-15 14:23:54,718 - INFO - Loading vector store from rag_project/data/ai_for_europe_0418...
2024-11-15 14:24:07,898 - INFO - Loading faiss.
2024-11-15 14:24:07,996 - INFO - Successfully loaded faiss.
2024-11-15 14:25:36,144 - INFO - Loading vector store from rag_project/data/eu_ai_act_regulation_0724...
2024-11-15 14:26:11,586 - INFO - Creating combined vector store...
2024-11-15 14:28:21,708 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-15 14:28:25,478 - INFO - Combined vector store created successfully.
2024-11-15 14:29:48,101 - INFO - Logging setup complete.
2024-11-15 14:29:48,102 - INFO - Logging setup complete.
2024-11-15 14:29:48,113 - INFO - Loading vector store from rag_project/data/ai_for_europe_0418...
2024-11-15 14:29:48,114 - INFO - Loading faiss.
2024-11-15 14:29:48,124 - INFO - Successfully loaded faiss.
2024-11-15 14:29:48,128 - INFO - Loading vector store from rag_project/data/eu_ai_act_regulation_0724...
2024-11-15 14:29:48,134 - INFO - Creating combined vector store...
2024-11-15 14:31:52,732 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-15 14:31:52,866 - INFO - Combined vector store created successfully.
2024-11-15 14:33:59,819 - INFO - Received query: what is the risk categories of AI systems in EU AI act?
2024-11-15 14:33:59,904 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-15 14:34:05,729 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-15 14:34:05,745 - INFO - Generated response: The EU AI act classifies certain AI systems as 'high-risk'. These high-risk AI systems are determined based on two conditions: if the AI system is intended to be used as a safety component of a product, or if the AI system itself is a product, covered by the Union harmonisation legislation listed in Annex I. The act also mentions AI systems related to products that are not high-risk, implying that there are lower risk categories, although these are not explicitly defined in the provided context.
2024-11-15 14:34:34,298 - INFO - Received query: what are the risk categories of AI?
2024-11-15 14:34:34,385 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-15 14:34:40,066 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-15 14:34:40,070 - INFO - Generated response: The risk categories of AI include systemic risks, harm to health and safety, adverse impacts on fundamental rights, and the likelihood of such harm or adverse impact. Systemic risks may arise from high capabilities of AI models, potentially leading to harmful bias and discrimination, disinformation, privacy threats, and chain reactions of negative effects. Harm to health and safety or fundamental rights could occur if an AI system acts autonomously without proper human oversight, or if it is not properly designed, tested, and trained with high-quality data before being put on the market.
2024-11-15 14:35:55,491 - INFO - Received query: What is the EU AI Act, and why was it introduced?
2024-11-15 14:35:55,572 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-15 14:36:00,291 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-15 14:36:00,292 - INFO - Generated response: The document does not provide specific information about an "EU AI Act" or why it was introduced. The context discusses a European initiative on AI launched in 2017, aimed at boosting the EU's technological and industrial capacity, preparing for socio-economic changes brought about by AI, and ensuring an appropriate ethical and legal framework. However, it does not refer to this initiative as an "act" or provide a reason for its introduction beyond the general objectives mentioned.
2024-11-15 14:36:14,930 - INFO - Received query: How does the EU AI Act categorize AI systems based on risk levels?
2024-11-15 14:36:15,008 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-15 14:36:21,932 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-15 14:36:21,935 - INFO - Generated response: The EU AI Act categorizes AI systems based on their risk levels. An AI system is considered high-risk if it meets two conditions: firstly, if it is intended to be used as a safety component of a product, or if the AI system itself is a product covered by the Union harmonisation legislation listed in Annex I. Secondly, the AI system would be high-risk if it significantly influences decision-making or substantially harms the legal interests protected under the areas specified in the Regulation.

AI systems that are not high-risk, or do not materially affect decision-making or harm legal interests substantially, are regarded as lower risk. Furthermore, AI systems released under free and open-source licenses are not subject to the regulation, unless they are considered high-risk or fall under certain articles of the Act.
2024-11-15 14:37:59,401 - INFO - Logging setup complete.
2024-11-15 14:37:59,401 - INFO - Logging setup complete.
2024-11-15 14:37:59,412 - INFO - Loading vector store from rag_project/data/ai_for_europe_0418...
2024-11-15 14:37:59,413 - INFO - Loading faiss.
2024-11-15 14:37:59,422 - INFO - Successfully loaded faiss.
2024-11-15 14:37:59,426 - INFO - Loading vector store from rag_project/data/eu_ai_act_regulation_0724...
2024-11-15 14:37:59,431 - INFO - Creating combined vector store...
2024-11-15 14:40:04,379 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-15 14:40:04,512 - INFO - Combined vector store created successfully.
2024-11-15 14:40:25,818 - INFO - Received query: what are the risk categories of AI? 
2024-11-15 14:40:25,895 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-15 14:40:33,512 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-15 14:40:33,525 - INFO - Generated response: {'query': 'what are the risk categories of AI? ', 'result': 'The risk categories of AI are not explicitly defined in the given context. However, it mentions the classification of AI models into general-purpose AI models and general-purpose AI models with systemic risks. Systemic risks refer to the potential harm that high-capability AI models can cause, such as harmful bias, discrimination, facilitation of disinformation, harm to privacy, threats to democratic values and human rights, and chain reactions that could have considerable negative effects on large scales. It also alludes to risks related to harm to health and safety, adverse impacts on fundamental rights, and significant concerns in relation to potential harm or adverse impacts.'}
2024-11-15 14:41:17,084 - INFO - Logging setup complete.
2024-11-15 14:41:17,084 - INFO - Logging setup complete.
2024-11-15 14:41:17,096 - INFO - Loading vector store from rag_project/data/ai_for_europe_0418...
2024-11-15 14:41:17,097 - INFO - Loading faiss.
2024-11-15 14:41:17,106 - INFO - Successfully loaded faiss.
2024-11-15 14:41:17,109 - INFO - Loading vector store from rag_project/data/eu_ai_act_regulation_0724...
2024-11-15 14:41:17,113 - INFO - Creating combined vector store...
2024-11-15 14:43:21,420 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-15 14:43:21,554 - INFO - Combined vector store created successfully.
2024-11-15 14:44:24,317 - INFO - Received query: what are the risk categories of AI?
2024-11-15 14:44:24,388 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-15 14:44:30,531 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-15 14:44:30,548 - INFO - Generated response: {'query': 'what are the risk categories of AI?', 'result': 'The risk categories of AI are not explicitly defined in the given context. However, it mentions systemic risks and risks associated with high-impact capabilities of general-purpose AI models. It also refers to risks associated with harmful bias and discrimination, disinformation, privacy threats, and events that could lead to chain reactions with large-scale negative effects. In law enforcement applications, risks related to surveillance, liberty deprivation, and impacts on fundamental rights are highlighted. The extent to which an AI system has caused harm to health and safety, or had an adverse impact on fundamental rights, is also considered a risk category.'}
2024-11-21 14:27:41,197 - INFO - Logging setup complete.
2024-11-21 14:27:41,197 - ERROR - OpenAI API key is not set.
2024-11-21 14:29:18,947 - INFO - Logging setup complete.
2024-11-21 14:29:18,947 - INFO - Logging setup complete.
2024-11-21 14:29:18,959 - INFO - Loading vector store from rag_project/data/ai_for_europe_0418...
2024-11-21 14:29:18,960 - INFO - Loading faiss.
2024-11-21 14:29:19,150 - INFO - Successfully loaded faiss.
2024-11-21 14:29:19,157 - INFO - Loading vector store from rag_project/data/eu_ai_act_regulation_0724...
2024-11-21 14:29:19,165 - INFO - Creating combined vector store...
2024-11-21 14:31:29,105 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-21 14:31:29,238 - INFO - Combined vector store created successfully.
2024-11-21 14:38:33,779 - INFO - Received query: Why do we need to regulate the use of Artificial Intelligence?
2024-11-21 14:38:34,694 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-21 14:38:42,784 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-21 14:38:42,801 - INFO - Generated response: {'query': 'Why do we need to regulate the use of Artificial Intelligence?', 'result': "We need to regulate the use of Artificial Intelligence (AI) to safeguard against its potential harmful effects and to ensure that it aligns with the fundamental values and rights such as democracy, rule of law, and environmental protection. Regulations are necessary to support innovation and cross-border movement of AI-based goods and services, while also preventing any unauthorized restrictions on their development and usage. Moreover, due to AI's autonomous decision-making capability and wide-ranging applications, rules on safety and civil law questions on liability need to be established and reviewed. This is essential as AI-powered systems like advanced robots and Internet of Things products may act in unforeseen ways. Regulations also help to ensure that research and development activities are conducted ethically and professionally."}
2024-11-21 17:32:46,832 - INFO - Logging setup complete.
2024-11-21 17:32:46,832 - INFO - Logging setup complete.
2024-11-21 17:32:46,845 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-21 17:32:46,846 - INFO - Loading faiss.
2024-11-21 17:32:46,870 - INFO - Successfully loaded faiss.
2024-11-21 17:32:46,879 - INFO - Vector store loaded successfully.
2024-11-21 17:33:16,041 - INFO - Received query: Why do we need to regulate the use of Artificial Intelligence?
2024-11-21 17:33:16,842 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-21 17:33:26,218 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-21 17:33:26,226 - INFO - Generated response: {'query': 'Why do we need to regulate the use of Artificial Intelligence?', 'result': "Regulation of Artificial Intelligence (AI) is necessary to safeguard against its potentially harmful effects. This includes ensuring the protection of natural persons, democracy, the rule of law, and environmental protection. Additionally, AI systems can be deployed in various sectors and parts of society, with varying levels of autonomy. This autonomy can lead to unintended consequences if not properly controlled. The regulation also ensures the free movement and use of AI-based goods and services across borders, while supporting innovation. It is also aimed at making sure the AI systems respect the Union’s basic values and fundamental rights. Finally, the regulation is necessary to address safety and liability issues, particularly given AI's ability to make autonomous decisions and potentially act in unforeseen ways."}
2024-11-22 17:30:41,721 - INFO - Logging setup complete.
2024-11-22 17:30:41,721 - INFO - Logging setup complete.
2024-11-22 17:30:41,736 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-22 17:30:41,741 - INFO - Loading faiss.
2024-11-22 17:30:41,786 - INFO - Successfully loaded faiss.
2024-11-22 17:30:41,878 - INFO - Vector store loaded successfully.
2024-11-22 17:31:04,250 - INFO - Logging setup complete.
2024-11-22 17:31:04,250 - INFO - Logging setup complete.
2024-11-22 17:31:04,266 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-22 17:31:04,267 - INFO - Loading faiss.
2024-11-22 17:31:04,293 - INFO - Successfully loaded faiss.
2024-11-22 17:31:04,375 - INFO - Vector store loaded successfully.
2024-11-22 17:31:22,499 - INFO - Logging setup complete.
2024-11-22 17:31:22,499 - INFO - Logging setup complete.
2024-11-22 17:31:22,517 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-22 17:31:22,517 - INFO - Loading faiss.
2024-11-22 17:31:22,531 - INFO - Successfully loaded faiss.
2024-11-22 17:31:22,614 - INFO - Vector store loaded successfully.
2024-11-22 17:31:39,182 - INFO - Logging setup complete.
2024-11-22 17:31:39,182 - INFO - Logging setup complete.
2024-11-22 17:31:39,199 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-22 17:31:39,200 - INFO - Loading faiss.
2024-11-22 17:31:39,215 - INFO - Successfully loaded faiss.
2024-11-22 17:31:39,308 - INFO - Vector store loaded successfully.
2024-11-22 17:31:39,422 - INFO - Use pytorch device_name: mps
2024-11-22 17:31:39,422 - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2024-11-22 17:33:27,067 - INFO - Received query: Why do we need to regulate the use of Artificial Intelligence?
2024-11-22 17:33:27,069 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:33:59,093 - INFO - Logging setup complete.
2024-11-22 17:33:59,093 - INFO - Logging setup complete.
2024-11-22 17:33:59,108 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-22 17:33:59,109 - INFO - Loading faiss.
2024-11-22 17:33:59,123 - INFO - Successfully loaded faiss.
2024-11-22 17:33:59,215 - INFO - Vector store loaded successfully.
2024-11-22 17:33:59,348 - INFO - Use pytorch device_name: mps
2024-11-22 17:33:59,348 - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2024-11-22 17:34:21,996 - INFO - Received query: Why do we need to regulate the use of Artificial Intelligence?
2024-11-22 17:34:21,999 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:25,305 - INFO - Received query: To whom does the AI Act apply?
2024-11-22 17:34:25,306 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:25,594 - INFO - Received query: What are the risk categories?
2024-11-22 17:34:25,595 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:25,833 - INFO - Received query: How do I know whether an AI system is high-risk?
2024-11-22 17:34:25,834 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:26,058 - INFO - Received query: What are examples of high-risk use cases as defined in Annex III?
2024-11-22 17:34:26,059 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:26,137 - INFO - Received query: What are the obligations for providers of high-risk AI systems?
2024-11-22 17:34:26,138 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:26,220 - INFO - Received query: What is the role of standardization in the AI Act?
2024-11-22 17:34:26,220 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:26,301 - INFO - Received query: How are general-purpose AI models being regulated?
2024-11-22 17:34:26,302 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:26,387 - INFO - Received query: Why is 10^25 FLOPs an appropriate threshold for GPAI with systemic risks?
2024-11-22 17:34:26,387 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:26,581 - INFO - Received query: What are the obligations regarding watermarking and labeling of AI outputs in the AI Act?
2024-11-22 17:34:26,582 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:26,804 - INFO - Received query: Is the AI Act future-proof?
2024-11-22 17:34:26,805 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:26,937 - INFO - Received query: How does the AI Act regulate biometric identification?
2024-11-22 17:34:26,937 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:27,017 - INFO - Received query: Why are particular rules needed for remote biometric identification?
2024-11-22 17:34:27,018 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:27,205 - INFO - Received query: How do the rules protect fundamental rights?
2024-11-22 17:34:27,206 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:27,288 - INFO - Received query: What is a fundamental rights impact assessment? Who has to conduct it, and when?
2024-11-22 17:34:27,288 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:27,440 - INFO - Received query: How does this regulation address racial and gender bias in AI?
2024-11-22 17:34:27,440 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:27,594 - INFO - Received query: When will the AI Act be fully applicable?
2024-11-22 17:34:27,595 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:27,682 - INFO - Received query: How will the AI Act be enforced?
2024-11-22 17:34:27,682 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:27,766 - INFO - Received query: Why is a European Artificial Intelligence Board needed and what will it do?
2024-11-22 17:34:27,767 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:27,852 - INFO - Received query: What are the penalties for infringement?
2024-11-22 17:34:27,853 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:27,987 - INFO - Received query: How will the General-Purpose AI Code of Practice be written?
2024-11-22 17:34:27,987 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:28,079 - INFO - Received query: If approved, how does the Code of Practice for general-purpose AI model providers serve as a central tool for compliance?
2024-11-22 17:34:28,080 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:28,167 - INFO - Received query: Does the AI Act contain provisions regarding environmental protection and sustainability?
2024-11-22 17:34:28,168 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:28,256 - INFO - Received query: How can the new rules support innovation?
2024-11-22 17:34:28,256 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:28,344 - INFO - Received query: What role does the AI Pact play in the implementation of the AI Act?
2024-11-22 17:34:28,344 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-22 17:34:28,429 - INFO - Received query: What is the international dimension of the EU's approach?
2024-11-22 17:34:28,430 - ERROR - Failed to generate response: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 67, in chat
    response = self.qa_chain({"query": query}, return_only_outputs=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 151, in _call
    docs = self._get_docs(question, run_manager=_run_manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain/chains/retrieval_qa/base.py", line 271, in _get_docs
    return self.retriever.invoke(
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2024-11-27 15:20:36,688 - INFO - Logging setup complete.
2024-11-27 15:20:36,688 - INFO - Logging setup complete.
2024-11-27 15:20:36,701 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 15:20:36,703 - INFO - Loading faiss.
2024-11-27 15:20:36,736 - INFO - Successfully loaded faiss.
2024-11-27 15:20:36,744 - INFO - Vector store loaded successfully.
2024-11-27 15:21:17,440 - INFO - Logging setup complete.
2024-11-27 15:21:17,440 - INFO - Logging setup complete.
2024-11-27 15:21:17,470 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 15:21:17,470 - INFO - Loading faiss.
2024-11-27 15:21:17,489 - INFO - Successfully loaded faiss.
2024-11-27 15:21:17,502 - INFO - Vector store loaded successfully.
2024-11-27 15:21:47,601 - INFO - Logging setup complete.
2024-11-27 15:21:47,601 - INFO - Logging setup complete.
2024-11-27 15:21:47,636 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 15:21:47,636 - INFO - Loading faiss.
2024-11-27 15:21:47,645 - INFO - Successfully loaded faiss.
2024-11-27 15:21:47,652 - INFO - Vector store loaded successfully.
2024-11-27 15:23:10,651 - INFO - Logging setup complete.
2024-11-27 15:23:10,651 - INFO - Logging setup complete.
2024-11-27 15:23:10,664 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 15:23:10,664 - INFO - Loading faiss.
2024-11-27 15:23:10,686 - INFO - Successfully loaded faiss.
2024-11-27 15:23:10,690 - INFO - Vector store loaded successfully.
2024-11-27 15:23:17,045 - INFO - Logging setup complete.
2024-11-27 15:23:17,045 - INFO - Logging setup complete.
2024-11-27 15:23:17,063 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 15:23:17,063 - INFO - Loading faiss.
2024-11-27 15:23:17,077 - INFO - Successfully loaded faiss.
2024-11-27 15:23:17,082 - INFO - Vector store loaded successfully.
2024-11-27 15:34:09,131 - INFO - Logging setup complete.
2024-11-27 15:34:09,131 - ERROR - OpenAI API key is not set.
2024-11-27 15:34:27,309 - INFO - Logging setup complete.
2024-11-27 15:34:27,309 - INFO - Logging setup complete.
2024-11-27 15:34:27,321 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 15:34:27,321 - INFO - Loading faiss.
2024-11-27 15:34:27,330 - INFO - Successfully loaded faiss.
2024-11-27 15:34:27,334 - INFO - Vector store loaded successfully.
2024-11-27 15:43:24,878 - INFO - Logging setup complete.
2024-11-27 15:43:24,878 - INFO - Logging setup complete.
2024-11-27 15:43:24,890 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 15:43:24,892 - INFO - Loading faiss.
2024-11-27 15:43:24,915 - INFO - Successfully loaded faiss.
2024-11-27 15:43:24,925 - INFO - Vector store loaded successfully.
2024-11-27 15:58:47,404 - INFO - Logging setup complete.
2024-11-27 15:58:47,405 - ERROR - OpenAI API key is not set.
2024-11-27 15:59:02,895 - INFO - Logging setup complete.
2024-11-27 15:59:02,895 - INFO - Logging setup complete.
2024-11-27 15:59:02,908 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 15:59:02,910 - INFO - Loading faiss.
2024-11-27 15:59:02,933 - INFO - Successfully loaded faiss.
2024-11-27 15:59:02,941 - INFO - Vector store loaded successfully.
2024-11-27 15:59:36,332 - INFO - Received query: Why do we need to regulate the use of Artificial Intelligence?
2024-11-27 15:59:36,354 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 400 Bad Request"
2024-11-27 15:59:36,355 - ERROR - Failed to generate response: invalid input type
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter_rag_fusion.py", line 72, in chat
    answer = self.qa_chain.invoke({"question": query})
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3022, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3727, in invoke
    output = {key: future.result() for key, future in zip(steps, futures)}
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3727, in <dictcomp>
    output = {key: future.result() for key, future in zip(steps, futures)}
                   ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py", line 456, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3711, in _invoke_step
    return context.run(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3022, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 75, in _request
    raise ResponseError(e.response.text, e.response.status_code) from None
ollama._types.ResponseError: invalid input type
2024-11-27 16:14:54,864 - INFO - Received query: /Users/ranacoskun/thesis/.venv/bin/python /Users/ranacoskun/thesis/rag_project/chat_new.py
2024-11-27 16:14:54,872 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 400 Bad Request"
2024-11-27 16:14:54,873 - ERROR - Failed to generate response: invalid input type
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter_rag_fusion.py", line 72, in chat
    answer = self.qa_chain.invoke({"question": query})
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3022, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3727, in invoke
    output = {key: future.result() for key, future in zip(steps, futures)}
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3727, in <dictcomp>
    output = {key: future.result() for key, future in zip(steps, futures)}
                   ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py", line 456, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/opt/homebrew/Cellar/python@3.11/3.11.4_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3711, in _invoke_step
    return context.run(
           ^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3022, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 254, in invoke
    raise e
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/retrievers.py", line 247, in invoke
    result = self._get_relevant_documents(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/vectorstores/base.py", line 1080, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **self.search_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/ollama/_client.py", line 75, in _request
    raise ResponseError(e.response.text, e.response.status_code) from None
ollama._types.ResponseError: invalid input type
2024-11-27 16:15:04,672 - INFO - Logging setup complete.
2024-11-27 16:15:04,672 - INFO - Logging setup complete.
2024-11-27 16:15:04,684 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 16:15:04,685 - INFO - Loading faiss.
2024-11-27 16:15:04,695 - INFO - Successfully loaded faiss.
2024-11-27 16:15:04,702 - INFO - Vector store loaded successfully.
2024-11-27 16:15:20,129 - INFO - Received query: hy do we need to regulate the use of Artificial Intelligence?
2024-11-27 16:15:21,247 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-27 16:15:21,262 - ERROR - Failed to generate response: "Input to PromptTemplate is missing variables {'question'}.  Expected: ['context', 'question'] Received: ['query', 'context']\nNote: if you intended {question} to be part of the string and not a variable, please escape it with double curly braces like: '{{question}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT"
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chat_new.py", line 84, in chat
    response = self.qa_chain.invoke({
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3022, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/prompts/base.py", line 208, in invoke
    return self._call_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 1927, in _call_with_config
    context.run(
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/config.py", line 396, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/prompts/base.py", line 182, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/prompts/base.py", line 176, in _validate_input
    raise KeyError(
KeyError: "Input to PromptTemplate is missing variables {'question'}.  Expected: ['context', 'question'] Received: ['query', 'context']\nNote: if you intended {question} to be part of the string and not a variable, please escape it with double curly braces like: '{{question}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT"
2024-11-27 16:15:43,282 - INFO - Logging setup complete.
2024-11-27 16:15:43,282 - INFO - Logging setup complete.
2024-11-27 16:15:43,294 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 16:15:43,295 - INFO - Loading faiss.
2024-11-27 16:15:43,304 - INFO - Successfully loaded faiss.
2024-11-27 16:15:43,313 - INFO - Vector store loaded successfully.
2024-11-27 16:15:49,111 - INFO - Received query: why do we need to regulate the use of Artificial Intelligence?
2024-11-27 16:15:49,204 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-27 16:15:55,129 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-27 16:15:55,150 - ERROR - Failed to generate response: 'source_documents'
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 69, in chat
    source_documents = response['source_documents']
                     ~~~~~~~~^^^^^^^^^^^^^^^^^^^^
KeyError: 'source_documents'
2024-11-27 16:17:51,290 - INFO - Received query: /Users/ranacoskun/thesis/.venv/bin/python /Users/ranacoskun/thesis/rag_project/chatter.py
2024-11-27 16:17:51,385 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-27 16:17:54,218 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-27 16:17:54,221 - ERROR - Failed to generate response: 'source_documents'
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chatter.py", line 69, in chat
    #         source_documents = response['source_documents']
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'source_documents'
2024-11-27 16:17:59,868 - INFO - Logging setup complete.
2024-11-27 16:17:59,869 - INFO - Logging setup complete.
2024-11-27 16:17:59,880 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 16:17:59,881 - INFO - Loading faiss.
2024-11-27 16:17:59,891 - INFO - Successfully loaded faiss.
2024-11-27 16:17:59,900 - INFO - Vector store loaded successfully.
2024-11-27 16:18:10,817 - INFO - Received query: why do we need to regulate the use of Artificial Intelligence? 
2024-11-27 16:18:10,912 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-27 16:18:21,458 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-27 16:18:21,477 - INFO - Generated response: {'query': 'why do we need to regulate the use of Artificial Intelligence? ', 'result': 'Regulation of Artificial Intelligence (AI) is necessary to protect against potential harmful effects of AI systems, to uphold values such as democracy, rule of law and environmental protection, and to ensure the respect of basic values and fundamental rights. The regulation also facilitates protection of natural persons and undertakings, and supports innovation and employment. It is also important to regulate AI to manage its deployment in various sectors of the economy, monitor its varying levels of autonomy, and address its potential safety and liability issues, especially in cases where AI systems act in ways not originally envisaged. Furthermore, regulation is needed to ensure that AI systems, especially those deemed high-risk, meet established safety standards before they are placed on the market or put into service.'}
2024-11-27 16:19:12,624 - INFO - Logging setup complete.
2024-11-27 16:19:12,624 - INFO - Logging setup complete.
2024-11-27 16:19:12,636 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 16:19:12,636 - INFO - Loading faiss.
2024-11-27 16:19:12,645 - INFO - Successfully loaded faiss.
2024-11-27 16:19:12,649 - INFO - Vector store loaded successfully.
2024-11-27 16:19:18,169 - INFO - Received query: why do we need to regulate the use of Artificial Intelligence? 
2024-11-27 16:19:18,253 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-27 16:19:18,267 - ERROR - Failed to generate response: "Input to PromptTemplate is missing variables {'question'}.  Expected: ['context', 'question'] Received: ['query', 'context']\nNote: if you intended {question} to be part of the string and not a variable, please escape it with double curly braces like: '{{question}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT"
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chat_new.py", line 84, in chat
    response = self.qa_chain.invoke({
               ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 3022, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/prompts/base.py", line 208, in invoke
    return self._call_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 1927, in _call_with_config
    context.run(
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/runnables/config.py", line 396, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
           ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/prompts/base.py", line 182, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ranacoskun/thesis/.venv/lib/python3.11/site-packages/langchain_core/prompts/base.py", line 176, in _validate_input
    raise KeyError(
KeyError: "Input to PromptTemplate is missing variables {'question'}.  Expected: ['context', 'question'] Received: ['query', 'context']\nNote: if you intended {question} to be part of the string and not a variable, please escape it with double curly braces like: '{{question}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT"
2024-11-27 16:20:16,046 - INFO - Logging setup complete.
2024-11-27 16:20:16,047 - INFO - Logging setup complete.
2024-11-27 16:20:16,058 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 16:20:16,059 - INFO - Loading faiss.
2024-11-27 16:20:16,067 - INFO - Successfully loaded faiss.
2024-11-27 16:20:16,071 - INFO - Vector store loaded successfully.
2024-11-27 16:20:22,508 - INFO - Received query: why do we need to regulate the use of Artificial Intelligence? 
2024-11-27 16:20:22,589 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-27 16:20:28,232 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-27 16:20:28,250 - INFO - Generated response: Regulation of Artificial Intelligence (AI) is critical to protect against potentially harmful effects of AI systems. It ensures the protection of fundamental values including democracy, the rule of law, environmental protection, and the rights of natural persons and enterprises. Moreover, it maintains the free movement and cross-border distribution of AI-based goods and services, prevents member states from imposing restrictions on AI development, and supports innovation. Regulation also addresses safety and liability concerns, particularly as AI systems can operate with varying degrees of autonomy, potentially acting in ways not initially envisaged. Furthermore, regulation ensures that AI technologies align with established legal frameworks and respect the Union's basic values and fundamental rights.
2024-11-27 16:20:28,250 - ERROR - Failed to generate response: string indices must be integers, not 'str'
Traceback (most recent call last):
  File "/Users/ranacoskun/thesis/rag_project/chat_new.py", line 62, in chat
    return response['result']
           ~~~~~~~~^^^^^^^^^^
TypeError: string indices must be integers, not 'str'
2024-11-27 16:21:19,245 - INFO - Logging setup complete.
2024-11-27 16:21:19,245 - INFO - Logging setup complete.
2024-11-27 16:21:19,258 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 16:21:19,258 - INFO - Loading faiss.
2024-11-27 16:21:19,267 - INFO - Successfully loaded faiss.
2024-11-27 16:21:19,271 - INFO - Vector store loaded successfully.
2024-11-27 16:21:24,236 - INFO - Received query: why do we need to regulate the use of Artificial Intelligence? 
2024-11-27 16:21:24,316 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-27 16:21:29,678 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-27 16:21:29,694 - INFO - Generated response: Artificial Intelligence (AI) needs to be regulated to protect against potential harmful effects of AI systems. The regulation ensures the protection of natural persons, democracy, rule of law, and environmental protection. It also supports innovation and aims to make the Union a leader in trustworthy AI. Furthermore, the regulation prevents Member States from imposing restrictions on the development, marketing and use of AI systems unless explicitly authorised. Given the complex ecosystem of AI and its autonomous decision-making feature, regulation is necessary to uphold safety, liability and to ensure respect for the Union's basic values and fundamental rights.
2024-11-27 16:26:42,512 - INFO - Received query: /Users/ranacoskun/thesis/.venv/bin/python /Users/ranacoskun/thesis/rag_project/chatter.py
2024-11-27 16:26:42,909 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-27 16:26:44,885 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-27 16:26:44,887 - INFO - Generated response: As an AI, I can't execute the Python script provided in your question. However, if you have any questions related to the legal documents provided, feel free to ask!
2024-11-27 16:27:03,002 - INFO - Logging setup complete.
2024-11-27 16:27:03,002 - ERROR - OpenAI API key is not set.
2024-11-27 16:27:33,838 - INFO - Logging setup complete.
2024-11-27 16:28:28,277 - INFO - Logging setup complete.
2024-11-27 16:28:28,277 - INFO - Logging setup complete.
2024-11-27 16:28:28,289 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 16:28:28,290 - INFO - Loading faiss.
2024-11-27 16:28:28,314 - INFO - Successfully loaded faiss.
2024-11-27 16:28:28,321 - INFO - Vector store loaded successfully.
2024-11-27 16:28:46,741 - INFO - Received query: why do we need AI regulations?
2024-11-27 16:28:46,825 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-27 16:28:52,671 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-27 16:28:52,689 - INFO - Generated response: AI regulations are needed to foster innovation while ensuring compliance with the law, enhance legal certainty for innovators, facilitate regulatory understanding of AI's opportunities and emerging risks, support cooperation and sharing of best practices, and accommodate the rapid technological developments in the field. They also help in managing the varying levels of autonomy and adaptiveness of AI systems and ensure their proper functionality in different contexts, including their ability to generate outputs like predictions, recommendations, or decisions. Regulations are particularly important for high-risk AI systems to ensure their safety and lawful usage.
2024-11-27 16:51:30,904 - INFO - Received query: /Users/ranacoskun/thesis/.venv/bin/python /Users/ranacoskun/thesis/rag_project/chatter_rag_fusion.py
2024-11-27 16:51:31,290 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-27 16:51:38,352 - INFO - Logging setup complete.
2024-11-27 16:51:38,352 - INFO - Logging setup complete.
2024-11-27 16:51:38,365 - INFO - Loading vector store from rag_project/data/vector_store...
2024-11-27 16:51:38,366 - INFO - Loading faiss.
2024-11-27 16:51:38,375 - INFO - Successfully loaded faiss.
2024-11-27 16:51:38,383 - INFO - Vector store loaded successfully.
2024-11-27 16:51:57,041 - INFO - Received query: why do we need AI regulations?
2024-11-27 16:51:57,109 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2024-11-27 16:51:57,112 - WARNING - Fused context is too long. Truncating to fit model limits.
2024-11-27 16:52:00,659 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-27 16:52:00,668 - INFO - Generated response: AI regulations are needed to ensure that AI systems operate within a controlled environment and comply with existing laws and regulations. They provide legal certainty for innovators and enhance understanding of opportunities and risks associated with AI use. These regulations also facilitate regulatory learning, promote cooperation, and encourage sharing of best practices. Furthermore, they ensure AI systems maintain a certain degree of autonomy without compromising legal and ethical standards.
2024-11-27 17:17:30,594 - INFO - Logging setup complete.
2024-11-27 17:19:02,890 - INFO - Logging setup complete.
2024-11-27 17:20:39,327 - INFO - Logging setup complete.
2024-11-27 17:20:39,327 - INFO - Logging setup complete.
2024-11-27 17:20:39,363 - INFO - Loading vector store from data/vector_store...
2024-11-27 17:20:39,363 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-27 17:20:39,402 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-27 17:20:39,402 - INFO - [33mPress CTRL+C to quit[0m
2024-11-27 17:20:39,428 - INFO -  * Restarting with watchdog (fsevents)
2024-11-27 17:20:40,106 - INFO - Logging setup complete.
2024-11-27 17:20:40,106 - INFO - Logging setup complete.
2024-11-27 17:20:40,145 - INFO - Loading vector store from data/vector_store...
2024-11-27 17:20:40,145 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-27 17:20:40,178 - WARNING -  * Debugger is active!
2024-11-27 17:20:40,187 - INFO -  * Debugger PIN: 388-406-333
2024-11-27 17:22:23,351 - INFO - 127.0.0.1 - - [27/Nov/2024 17:22:23] "GET / HTTP/1.1" 200 -
2024-11-27 17:22:23,714 - INFO - 127.0.0.1 - - [27/Nov/2024 17:22:23] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2024-11-27 17:32:02,608 - INFO - Logging setup complete.
2024-11-27 17:32:02,610 - INFO - Logging setup complete.
2024-11-27 17:32:02,640 - INFO - Loading vector store from data/vector_store...
2024-11-27 17:32:02,640 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-27 17:32:02,679 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-27 17:32:02,679 - INFO - [33mPress CTRL+C to quit[0m
2024-11-27 17:32:02,685 - INFO -  * Restarting with watchdog (fsevents)
2024-11-27 17:32:03,428 - INFO - Logging setup complete.
2024-11-27 17:32:03,428 - INFO - Logging setup complete.
2024-11-27 17:32:03,457 - INFO - Loading vector store from data/vector_store...
2024-11-27 17:32:03,458 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-27 17:32:03,491 - WARNING -  * Debugger is active!
2024-11-27 17:32:03,499 - INFO -  * Debugger PIN: 388-406-333
2024-11-27 17:36:27,762 - INFO - Logging setup complete.
2024-11-27 17:36:27,762 - INFO - Logging setup complete.
2024-11-27 17:36:27,790 - INFO - Loading vector store from data/vector_store...
2024-11-27 17:36:27,790 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-27 17:36:27,826 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-27 17:36:27,826 - INFO - [33mPress CTRL+C to quit[0m
2024-11-27 17:36:27,831 - INFO -  * Restarting with watchdog (fsevents)
2024-11-27 17:36:28,589 - INFO - Logging setup complete.
2024-11-27 17:36:28,589 - INFO - Logging setup complete.
2024-11-27 17:36:28,619 - INFO - Loading vector store from data/vector_store...
2024-11-27 17:36:28,619 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-27 17:36:28,652 - WARNING -  * Debugger is active!
2024-11-27 17:36:28,661 - INFO -  * Debugger PIN: 388-406-333
2024-11-27 17:38:58,188 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2024-11-27 17:38:59,352 - INFO -  * Restarting with watchdog (fsevents)
2024-11-27 17:39:00,312 - INFO - Logging setup complete.
2024-11-27 17:39:00,312 - INFO - Logging setup complete.
2024-11-27 17:39:00,342 - INFO - Loading vector store from data/vector_store...
2024-11-27 17:39:00,342 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-27 17:39:00,378 - WARNING -  * Debugger is active!
2024-11-27 17:39:00,386 - INFO -  * Debugger PIN: 388-406-333
2024-11-27 17:39:23,433 - INFO - Logging setup complete.
2024-11-27 17:39:23,433 - INFO - Logging setup complete.
2024-11-27 17:39:23,466 - INFO - Loading vector store from data/vector_store...
2024-11-27 17:39:23,466 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-27 17:39:23,504 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-27 17:39:23,504 - INFO - [33mPress CTRL+C to quit[0m
2024-11-27 17:39:23,509 - INFO -  * Restarting with watchdog (fsevents)
2024-11-27 17:39:24,206 - INFO - Logging setup complete.
2024-11-27 17:39:24,206 - INFO - Logging setup complete.
2024-11-27 17:39:24,266 - INFO - Loading vector store from data/vector_store...
2024-11-27 17:39:24,266 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-27 17:39:24,301 - WARNING -  * Debugger is active!
2024-11-27 17:39:24,309 - INFO -  * Debugger PIN: 388-406-333
2024-11-27 17:40:26,889 - INFO - Logging setup complete.
2024-11-27 17:40:26,889 - INFO - Logging setup complete.
2024-11-27 17:40:26,935 - INFO - Loading vector store from data/vector_store...
2024-11-27 17:40:26,935 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-27 17:40:26,974 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-27 17:40:26,974 - INFO - [33mPress CTRL+C to quit[0m
2024-11-27 17:40:26,980 - INFO -  * Restarting with watchdog (fsevents)
2024-11-27 17:40:27,640 - INFO - Logging setup complete.
2024-11-27 17:40:27,640 - INFO - Logging setup complete.
2024-11-27 17:40:27,686 - INFO - Loading vector store from data/vector_store...
2024-11-27 17:40:27,686 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-27 17:40:27,720 - WARNING -  * Debugger is active!
2024-11-27 17:40:27,728 - INFO -  * Debugger PIN: 388-406-333
2024-11-27 17:41:01,530 - INFO - 127.0.0.1 - - [27/Nov/2024 17:41:01] "[33mGET / HTTP/1.1[0m" 404 -
2024-11-27 17:42:00,014 - INFO - 127.0.0.1 - - [27/Nov/2024 17:42:00] "[33mGET / HTTP/1.1[0m" 404 -
2024-11-29 13:35:36,118 - INFO - Logging setup complete.
2024-11-29 13:35:36,118 - INFO - Logging setup complete.
2024-11-29 13:35:36,146 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:35:36,147 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:35:36,185 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-29 13:35:36,185 - INFO - [33mPress CTRL+C to quit[0m
2024-11-29 13:35:36,197 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 13:35:36,898 - INFO - Logging setup complete.
2024-11-29 13:35:36,898 - INFO - Logging setup complete.
2024-11-29 13:35:36,935 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:35:36,935 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:35:36,968 - WARNING -  * Debugger is active!
2024-11-29 13:35:36,977 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 13:40:33,195 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2024-11-29 13:40:34,379 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 13:40:35,311 - INFO - Logging setup complete.
2024-11-29 13:40:35,311 - INFO - Logging setup complete.
2024-11-29 13:40:35,341 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:40:35,341 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:40:35,388 - WARNING -  * Debugger is active!
2024-11-29 13:40:35,399 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 13:40:37,083 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2024-11-29 13:40:38,221 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 13:40:38,942 - INFO - Logging setup complete.
2024-11-29 13:40:38,942 - INFO - Logging setup complete.
2024-11-29 13:40:38,972 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:40:38,973 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:40:39,006 - WARNING -  * Debugger is active!
2024-11-29 13:40:39,012 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 13:40:40,951 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2024-11-29 13:40:42,096 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 13:40:42,747 - INFO - Logging setup complete.
2024-11-29 13:40:42,747 - INFO - Logging setup complete.
2024-11-29 13:40:42,797 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:40:42,797 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:40:42,830 - WARNING -  * Debugger is active!
2024-11-29 13:40:42,837 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 13:40:56,440 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2024-11-29 13:40:57,581 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 13:40:58,727 - INFO - Logging setup complete.
2024-11-29 13:40:58,728 - INFO - Logging setup complete.
2024-11-29 13:40:58,756 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:40:58,757 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:40:58,795 - WARNING -  * Debugger is active!
2024-11-29 13:40:58,804 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 13:41:06,070 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2024-11-29 13:41:07,226 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 13:41:08,232 - INFO - Logging setup complete.
2024-11-29 13:41:08,232 - INFO - Logging setup complete.
2024-11-29 13:41:08,265 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:41:08,265 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:41:08,303 - WARNING -  * Debugger is active!
2024-11-29 13:41:08,312 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 13:41:18,221 - INFO - Logging setup complete.
2024-11-29 13:41:18,221 - INFO - Logging setup complete.
2024-11-29 13:41:18,269 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:41:18,269 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:41:18,303 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-29 13:41:18,304 - INFO - [33mPress CTRL+C to quit[0m
2024-11-29 13:41:18,306 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 13:41:18,989 - INFO - Logging setup complete.
2024-11-29 13:41:18,989 - INFO - Logging setup complete.
2024-11-29 13:41:19,030 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:41:19,030 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:41:19,064 - WARNING -  * Debugger is active!
2024-11-29 13:41:19,070 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 13:42:31,805 - INFO - 127.0.0.1 - - [29/Nov/2024 13:42:31] "[33mGET / HTTP/1.1[0m" 404 -
2024-11-29 13:44:27,694 - INFO - Logging setup complete.
2024-11-29 13:44:27,694 - INFO - Logging setup complete.
2024-11-29 13:44:27,723 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:44:27,723 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:44:27,763 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-29 13:44:27,763 - INFO - [33mPress CTRL+C to quit[0m
2024-11-29 13:44:27,768 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 13:44:28,408 - INFO - Logging setup complete.
2024-11-29 13:44:28,408 - INFO - Logging setup complete.
2024-11-29 13:44:28,470 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:44:28,470 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:44:28,514 - WARNING -  * Debugger is active!
2024-11-29 13:44:28,522 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 13:46:09,990 - INFO - Logging setup complete.
2024-11-29 13:46:09,990 - INFO - Logging setup complete.
2024-11-29 13:46:10,020 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:46:10,020 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:46:10,058 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-29 13:46:10,058 - INFO - [33mPress CTRL+C to quit[0m
2024-11-29 13:46:10,063 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 13:46:10,771 - INFO - Logging setup complete.
2024-11-29 13:46:10,772 - INFO - Logging setup complete.
2024-11-29 13:46:10,816 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:46:10,816 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:46:10,851 - WARNING -  * Debugger is active!
2024-11-29 13:46:10,858 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 13:46:19,887 - INFO - 127.0.0.1 - - [29/Nov/2024 13:46:19] "[33mGET / HTTP/1.1[0m" 404 -
2024-11-29 13:54:09,158 - INFO - 127.0.0.1 - - [29/Nov/2024 13:54:09] "[33mGET / HTTP/1.1[0m" 404 -
2024-11-29 13:54:43,628 - INFO - 127.0.0.1 - - [29/Nov/2024 13:54:43] "[33mGET / HTTP/1.1[0m" 404 -
2024-11-29 13:55:38,286 - INFO - 127.0.0.1 - - [29/Nov/2024 13:55:38] "[33mGET / HTTP/1.1[0m" 404 -
2024-11-29 13:58:07,721 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2024-11-29 13:58:08,904 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 13:58:36,804 - INFO - Logging setup complete.
2024-11-29 13:58:36,804 - INFO - Logging setup complete.
2024-11-29 13:58:36,833 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:58:36,833 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:58:36,882 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-29 13:58:36,883 - INFO - [33mPress CTRL+C to quit[0m
2024-11-29 13:58:36,889 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 13:58:37,522 - INFO - Logging setup complete.
2024-11-29 13:58:37,523 - INFO - Logging setup complete.
2024-11-29 13:58:37,567 - INFO - Loading vector store from data/vector_store...
2024-11-29 13:58:37,568 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 13:58:37,618 - WARNING -  * Debugger is active!
2024-11-29 13:58:37,627 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 13:58:59,340 - INFO - 127.0.0.1 - - [29/Nov/2024 13:58:59] "[33mGET / HTTP/1.1[0m" 404 -
2024-11-29 14:00:46,589 - INFO - Logging setup complete.
2024-11-29 14:00:46,589 - INFO - Logging setup complete.
2024-11-29 14:00:46,622 - INFO - Loading vector store from data/vector_store...
2024-11-29 14:00:46,622 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 14:00:46,662 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-29 14:00:46,662 - INFO - [33mPress CTRL+C to quit[0m
2024-11-29 14:00:46,666 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 14:00:47,307 - INFO - Logging setup complete.
2024-11-29 14:00:47,307 - INFO - Logging setup complete.
2024-11-29 14:00:47,353 - INFO - Loading vector store from data/vector_store...
2024-11-29 14:00:47,353 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 14:00:47,388 - WARNING -  * Debugger is active!
2024-11-29 14:00:47,395 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 14:08:01,492 - INFO - Logging setup complete.
2024-11-29 14:08:01,493 - INFO - Logging setup complete.
2024-11-29 14:08:01,522 - INFO - Loading vector store from data/vector_store...
2024-11-29 14:08:01,522 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 14:08:01,560 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
2024-11-29 14:08:01,560 - INFO - [33mPress CTRL+C to quit[0m
2024-11-29 14:08:01,564 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 14:08:02,257 - INFO - Logging setup complete.
2024-11-29 14:08:02,257 - INFO - Logging setup complete.
2024-11-29 14:08:02,297 - INFO - Loading vector store from data/vector_store...
2024-11-29 14:08:02,297 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 14:08:02,329 - WARNING -  * Debugger is active!
2024-11-29 14:08:02,341 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 14:09:03,864 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2024-11-29 14:09:05,025 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 14:09:07,858 - INFO - Logging setup complete.
2024-11-29 14:09:07,858 - INFO - Logging setup complete.
2024-11-29 14:09:07,887 - INFO - Loading vector store from data/vector_store...
2024-11-29 14:09:07,887 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 14:09:07,924 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2024-11-29 14:09:07,925 - INFO - [33mPress CTRL+C to quit[0m
2024-11-29 14:09:07,930 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 14:09:08,683 - INFO - Logging setup complete.
2024-11-29 14:09:08,684 - INFO - Logging setup complete.
2024-11-29 14:09:08,746 - INFO - Loading vector store from data/vector_store...
2024-11-29 14:09:08,746 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 14:09:08,779 - WARNING -  * Debugger is active!
2024-11-29 14:09:08,786 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 14:09:41,305 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2024-11-29 14:09:42,455 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 14:09:43,416 - INFO - Logging setup complete.
2024-11-29 14:09:43,416 - INFO - Logging setup complete.
2024-11-29 14:09:43,444 - INFO - Loading vector store from data/vector_store...
2024-11-29 14:09:43,445 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 14:09:43,478 - WARNING -  * Debugger is active!
2024-11-29 14:09:43,486 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 14:09:59,835 - INFO - Logging setup complete.
2024-11-29 14:09:59,835 - INFO - Logging setup complete.
2024-11-29 14:09:59,864 - INFO - Loading vector store from data/vector_store...
2024-11-29 14:09:59,864 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 14:09:59,906 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2024-11-29 14:09:59,906 - INFO - [33mPress CTRL+C to quit[0m
2024-11-29 14:09:59,911 - INFO -  * Restarting with watchdog (fsevents)
2024-11-29 14:10:00,637 - INFO - Logging setup complete.
2024-11-29 14:10:00,637 - INFO - Logging setup complete.
2024-11-29 14:10:00,673 - INFO - Loading vector store from data/vector_store...
2024-11-29 14:10:00,673 - ERROR - Failed to load vector store: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 55, in dependable_faiss_import
    import faiss
ModuleNotFoundError: No module named 'faiss'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 31, in load_vector_store
    docsearch = FAISS.load_local(
                ^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 1202, in load_local
    faiss = dependable_faiss_import()
            ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 57, in dependable_faiss_import
    raise ImportError(
ImportError: Could not import faiss python package. Please install it with `pip install faiss-gpu` (for CUDA supported GPU) or `pip install faiss-cpu` (depending on Python version).
2024-11-29 14:10:00,706 - WARNING -  * Debugger is active!
2024-11-29 14:10:00,715 - INFO -  * Debugger PIN: 388-406-333
2024-11-29 14:10:23,563 - INFO - 127.0.0.1 - - [29/Nov/2024 14:10:23] "OPTIONS /api/chat HTTP/1.1" 200 -
2024-11-29 14:10:23,567 - INFO - Received query: why do we need AI regulations?
2024-11-29 14:10:23,568 - ERROR - Vector store is not loaded.
2024-11-29 14:10:29,671 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-29 14:10:29,682 - INFO - Generated response: AI regulations are needed to ensure ethical use, safeguard privacy, prevent misuse, and maintain accountability. They are essential to set standards for the development and deployment of AI technologies, to avoid biases in AI decision-making, and to protect individuals and societies from potential harm. Without proper regulations, there could be an increased risk of violation of privacy rights, discrimination, and other adverse impacts.
2024-11-29 14:10:29,682 - INFO - 127.0.0.1 - - [29/Nov/2024 14:10:29] "POST /api/chat HTTP/1.1" 200 -
2024-11-29 16:08:27,787 - INFO - 127.0.0.1 - - [29/Nov/2024 16:08:27] "OPTIONS /api/chat HTTP/1.1" 200 -
2024-11-29 16:08:27,792 - INFO - Received query: why do we need AI regulations?
2024-11-29 16:08:27,792 - ERROR - Vector store is not loaded.
2024-11-29 16:08:34,779 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-11-29 16:08:34,789 - INFO - Generated response: AI regulations are needed to ensure the ethical use of AI technologies, to protect individuals' privacy and data rights, to prevent misuse or harmful consequences resulting from AI applications, and to establish standards for accountability and transparency. They are also crucial in mitigating potential biases in AI decision-making processes.
2024-11-29 16:08:34,789 - INFO - 127.0.0.1 - - [29/Nov/2024 16:08:34] "POST /api/chat HTTP/1.1" 200 -
2025-03-15 17:47:14,330 - INFO - Logging setup complete.
2025-03-15 17:47:14,330 - INFO - Logging setup complete.
2025-03-15 17:47:14,359 - INFO - Loading vector store from data/vector_store...
2025-03-15 17:47:14,360 - INFO - Loading faiss.
2025-03-15 17:47:14,803 - INFO - Successfully loaded faiss.
2025-03-15 17:47:14,806 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-15 17:47:14,810 - INFO - Vector store loaded successfully.
2025-03-15 17:47:14,867 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-03-15 17:47:14,867 - INFO - [33mPress CTRL+C to quit[0m
2025-03-15 17:47:14,882 - INFO -  * Restarting with watchdog (fsevents)
2025-03-15 17:47:15,523 - INFO - Logging setup complete.
2025-03-15 17:47:15,523 - INFO - Logging setup complete.
2025-03-15 17:47:15,559 - INFO - Loading vector store from data/vector_store...
2025-03-15 17:47:15,559 - INFO - Loading faiss.
2025-03-15 17:47:15,568 - INFO - Successfully loaded faiss.
2025-03-15 17:47:15,572 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-15 17:47:15,584 - INFO - Vector store loaded successfully.
2025-03-15 17:47:15,617 - WARNING -  * Debugger is active!
2025-03-15 17:47:15,626 - INFO -  * Debugger PIN: 388-406-333
2025-03-15 17:47:32,430 - INFO - 127.0.0.1 - - [15/Mar/2025 17:47:32] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-15 17:47:32,433 - INFO - Received query: hello
2025-03-15 17:47:32,434 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-15 17:47:32,966 - INFO - Received query: hello
2025-03-15 17:47:32,967 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-15 17:47:34,092 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-15 17:47:34,101 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-15 17:47:34,158 - INFO - Generated response: Hello! How can I assist you with your legal document needs today?
2025-03-15 17:47:34,158 - INFO - 127.0.0.1 - - [15/Mar/2025 17:47:34] "POST /api/chat HTTP/1.1" 200 -
2025-03-15 17:47:34,159 - INFO - Generated response: Hello! How can I assist you with your legal document needs today?
2025-03-15 17:47:34,159 - INFO - 127.0.0.1 - - [15/Mar/2025 17:47:34] "POST /api/chat HTTP/1.1" 200 -
2025-03-15 17:47:45,863 - INFO - 127.0.0.1 - - [15/Mar/2025 17:47:45] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-15 17:47:45,865 - INFO - Received query: what is eu ai act?

2025-03-15 17:47:45,866 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-15 17:47:48,326 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-15 17:47:48,329 - INFO - Generated response: The EU AI Act refers to a proposed legislation by the European Union aimed at regulating artificial intelligence. It establishes a legal framework for AI, setting standards for its development and use to ensure safety and respect for fundamental rights. It also sets fines for non-compliance and promotes the creation of a European Artificial Intelligence Board.
2025-03-15 17:47:48,330 - INFO - 127.0.0.1 - - [15/Mar/2025 17:47:48] "POST /api/chat HTTP/1.1" 200 -
2025-03-15 17:48:27,547 - INFO - 127.0.0.1 - - [15/Mar/2025 17:48:27] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-15 17:48:27,550 - INFO - Received query: do you know irem?

2025-03-15 17:48:27,551 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-15 17:48:29,520 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-15 17:48:29,523 - INFO - Generated response: As an AI, I don't have personal knowledge or experiences, so I don't "know" any individuals named Irem. However, I can find information available publicly or in the documents provided to me.
2025-03-15 17:48:29,524 - INFO - 127.0.0.1 - - [15/Mar/2025 17:48:29] "POST /api/chat HTTP/1.1" 200 -
2025-03-15 17:48:47,830 - INFO - 127.0.0.1 - - [15/Mar/2025 17:48:47] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-15 17:48:47,832 - INFO - Received query: she is very famous so.....
2025-03-15 17:48:47,833 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-15 17:48:49,969 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-15 17:48:49,972 - INFO - Generated response: As an AI, I need more specific context to provide an accurate response. Please provide more details.
2025-03-15 17:48:49,973 - INFO - 127.0.0.1 - - [15/Mar/2025 17:48:49] "POST /api/chat HTTP/1.1" 200 -
2025-03-27 11:32:16,954 - INFO - Logging setup complete.
2025-03-27 11:32:16,954 - INFO - Logging setup complete.
2025-03-27 11:32:16,981 - INFO - Loading vector store from data/vector_store...
2025-03-27 11:32:16,982 - INFO - Loading faiss.
2025-03-27 11:32:17,159 - INFO - Successfully loaded faiss.
2025-03-27 11:32:17,162 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-27 11:32:17,170 - INFO - Vector store loaded successfully.
2025-03-27 11:32:17,214 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-03-27 11:32:17,214 - INFO - [33mPress CTRL+C to quit[0m
2025-03-27 11:32:17,229 - INFO -  * Restarting with watchdog (fsevents)
2025-03-27 11:32:17,908 - INFO - Logging setup complete.
2025-03-27 11:32:17,908 - INFO - Logging setup complete.
2025-03-27 11:32:17,951 - INFO - Loading vector store from data/vector_store...
2025-03-27 11:32:17,952 - INFO - Loading faiss.
2025-03-27 11:32:17,960 - INFO - Successfully loaded faiss.
2025-03-27 11:32:17,962 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-27 11:32:17,965 - INFO - Vector store loaded successfully.
2025-03-27 11:32:17,997 - WARNING -  * Debugger is active!
2025-03-27 11:32:18,006 - INFO -  * Debugger PIN: 481-183-781
2025-03-27 11:33:33,963 - INFO - 127.0.0.1 - - [27/Mar/2025 11:33:33] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-27 11:33:33,966 - INFO - Received query: hello

2025-03-27 11:33:33,968 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-27 11:33:36,686 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-27 11:33:36,750 - INFO - Generated response: Hello! How can I assist you with your legal document needs today?
2025-03-27 11:33:36,751 - INFO - 127.0.0.1 - - [27/Mar/2025 11:33:36] "POST /api/chat HTTP/1.1" 200 -
2025-03-27 11:33:48,027 - INFO - 127.0.0.1 - - [27/Mar/2025 11:33:48] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-27 11:33:48,029 - INFO - Received query: what is eu ai act?
2025-03-27 11:33:48,029 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-27 11:33:53,331 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-27 11:33:53,336 - INFO - Generated response: The EU AI Act is a proposed regulation by the European Union aiming to set rules and standards for the use and development of artificial intelligence. It includes provisions for transparency, accountability, and specific restrictions on certain uses of AI. This act seeks to ensure the safety and fundamental rights of individuals and businesses while also fostering innovation, growth, and competitiveness.
2025-03-27 11:33:53,337 - INFO - 127.0.0.1 - - [27/Mar/2025 11:33:53] "POST /api/chat HTTP/1.1" 200 -
2025-03-27 11:34:04,543 - INFO - 127.0.0.1 - - [27/Mar/2025 11:34:04] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-27 11:34:04,545 - INFO - Received query: what is an orange
2025-03-27 11:34:04,546 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-27 11:34:06,840 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-27 11:34:06,852 - INFO - Generated response: An orange is a type of citrus fruit which is also a popular color. It is known for its tangy sweet flavor and high vitamin C content.
2025-03-27 11:34:06,853 - INFO - 127.0.0.1 - - [27/Mar/2025 11:34:06] "POST /api/chat HTTP/1.1" 200 -
2025-03-27 11:34:52,514 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/chatter.py', reloading
2025-03-27 11:34:53,688 - INFO -  * Restarting with watchdog (fsevents)
2025-03-27 11:34:54,621 - INFO - Logging setup complete.
2025-03-27 11:34:54,621 - INFO - Logging setup complete.
2025-03-27 11:34:54,652 - INFO - Loading vector store from data/vector_store...
2025-03-27 11:34:54,652 - INFO - Loading faiss.
2025-03-27 11:34:54,663 - INFO - Successfully loaded faiss.
2025-03-27 11:34:54,665 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-27 11:34:54,671 - INFO - Vector store loaded successfully.
2025-03-27 11:34:54,705 - WARNING -  * Debugger is active!
2025-03-27 11:34:54,713 - INFO -  * Debugger PIN: 481-183-781
2025-03-27 11:41:35,692 - INFO - Logging setup complete.
2025-03-27 11:41:35,693 - INFO - Logging setup complete.
2025-03-27 11:41:35,723 - INFO - Loading vector store from data/vector_store...
2025-03-27 11:41:35,724 - INFO - Loading faiss.
2025-03-27 11:41:35,747 - INFO - Successfully loaded faiss.
2025-03-27 11:41:35,750 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-27 11:41:35,756 - INFO - Vector store loaded successfully.
2025-03-27 11:41:35,798 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-03-27 11:41:35,798 - INFO - [33mPress CTRL+C to quit[0m
2025-03-27 11:41:35,803 - INFO -  * Restarting with watchdog (fsevents)
2025-03-27 11:41:36,568 - INFO - Logging setup complete.
2025-03-27 11:41:36,568 - INFO - Logging setup complete.
2025-03-27 11:41:36,606 - INFO - Loading vector store from data/vector_store...
2025-03-27 11:41:36,607 - INFO - Loading faiss.
2025-03-27 11:41:36,618 - INFO - Successfully loaded faiss.
2025-03-27 11:41:36,619 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-27 11:41:36,623 - INFO - Vector store loaded successfully.
2025-03-27 11:41:36,657 - WARNING -  * Debugger is active!
2025-03-27 11:41:36,666 - INFO -  * Debugger PIN: 481-183-781
2025-03-27 11:42:02,131 - INFO - 127.0.0.1 - - [27/Mar/2025 11:42:02] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-27 11:42:02,133 - INFO - Received query: who is elon musk

2025-03-27 11:42:02,134 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-27 11:42:04,018 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-27 11:42:04,038 - INFO - Generated response: As there is no context provided related to Elon Musk, I am unable to provide a response.
2025-03-27 11:42:04,039 - INFO - 127.0.0.1 - - [27/Mar/2025 11:42:04] "POST /api/chat HTTP/1.1" 200 -
2025-03-27 11:42:32,362 - INFO - 127.0.0.1 - - [27/Mar/2025 11:42:32] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-27 11:42:32,365 - INFO - Received query: what are the risk categories in EU AI Act?
2025-03-27 11:42:32,366 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-27 11:42:34,018 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-27 11:42:34,023 - INFO - Generated response: I'm sorry, but I can't provide the information you're looking for because the context is missing.
2025-03-27 11:42:34,024 - INFO - 127.0.0.1 - - [27/Mar/2025 11:42:34] "POST /api/chat HTTP/1.1" 200 -
2025-03-27 11:42:40,803 - INFO - 127.0.0.1 - - [27/Mar/2025 11:42:40] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-27 11:42:40,805 - INFO - Received query: what are the risk categories in EU AI Act?
2025-03-27 11:42:40,857 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-27 11:42:41,903 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-27 11:42:41,907 - INFO - Generated response: I don't know.
2025-03-27 11:42:41,908 - INFO - 127.0.0.1 - - [27/Mar/2025 11:42:41] "POST /api/chat HTTP/1.1" 200 -
2025-03-27 11:42:52,664 - INFO - 127.0.0.1 - - [27/Mar/2025 11:42:52] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-27 11:42:52,666 - INFO - Received query: what is eu ai act?
2025-03-27 11:42:52,667 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-03-27 11:42:54,398 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-27 11:42:54,401 - INFO - Generated response: I'm sorry, but I can't provide the information you're looking for because the context is not provided.
2025-03-27 11:42:54,402 - INFO - 127.0.0.1 - - [27/Mar/2025 11:42:54] "POST /api/chat HTTP/1.1" 200 -
2025-03-27 11:43:42,738 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/chatter.py', reloading
2025-03-27 11:43:43,911 - INFO -  * Restarting with watchdog (fsevents)
2025-03-27 11:45:15,158 - INFO - Logging setup complete.
2025-03-27 11:45:15,159 - INFO - Logging setup complete.
2025-03-27 11:45:15,197 - INFO - Loading vector store from data/vector_store...
2025-03-27 11:45:15,198 - INFO - Loading faiss.
2025-03-27 11:45:15,221 - INFO - Successfully loaded faiss.
2025-03-27 11:45:15,224 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-27 11:45:15,231 - INFO - Vector store loaded successfully.
2025-03-27 11:45:15,267 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-03-27 11:45:15,267 - INFO - [33mPress CTRL+C to quit[0m
2025-03-27 11:45:15,273 - INFO -  * Restarting with watchdog (fsevents)
2025-03-27 11:45:15,927 - INFO - Logging setup complete.
2025-03-27 11:45:15,928 - INFO - Logging setup complete.
2025-03-27 11:45:15,965 - INFO - Loading vector store from data/vector_store...
2025-03-27 11:45:15,965 - INFO - Loading faiss.
2025-03-27 11:45:15,976 - INFO - Successfully loaded faiss.
2025-03-27 11:45:15,979 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-03-27 11:45:15,982 - INFO - Vector store loaded successfully.
2025-03-27 11:45:16,014 - WARNING -  * Debugger is active!
2025-03-27 11:45:16,023 - INFO -  * Debugger PIN: 481-183-781
2025-03-27 11:45:29,080 - INFO - 127.0.0.1 - - [27/Mar/2025 11:45:29] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-27 11:45:29,085 - INFO - Received query: what is eu ai act?
2025-03-27 11:45:29,928 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-03-27 11:45:38,284 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-27 11:45:38,305 - INFO - Generated response: The EU AI Act is a regulatory framework proposed by the European Union to govern the use and development of artificial intelligence (AI) within its member states. The Act aims to ensure an appropriate ethical and legal framework for AI, based on the Union's values and in line with the Charter of Fundamental Rights of the EU. It seeks to boost the EU's technological and industrial capacity and AI uptake across the economy, both by the private and public sectors, and to prepare for socio-economic changes brought about by AI. The Act also includes initiatives such as the establishment of a European AI Alliance. The Act does not apply to AI systems or models developed solely for scientific research and development, nor to research, testing, or development activities regarding AI systems prior to their being placed on the market.
2025-03-27 11:45:38,306 - INFO - 127.0.0.1 - - [27/Mar/2025 11:45:38] "POST /api/chat HTTP/1.1" 200 -
2025-03-27 11:45:51,139 - INFO - 127.0.0.1 - - [27/Mar/2025 11:45:51] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-27 11:45:51,142 - INFO - Received query: what are the risk categories in eu ai act?
2025-03-27 11:45:51,206 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-03-27 11:45:57,497 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-27 11:45:57,552 - INFO - Generated response: The EU AI Act classifies AI systems into high-risk and non-high-risk categories. High-risk AI systems are determined based on whether an AI system is intended to be used as a safety component of a product or if the AI system itself is a product covered by the Union harmonisation legislation listed in Annex I. If an AI system is misclassified as non-high-risk to circumvent application requirements, fines may be applied according to Article 99. Non-high-risk AI systems are those that do not fulfill the conditions for high-risk classification but are still required to be safe when placed on the market or put into service.
2025-03-27 11:45:57,552 - INFO - 127.0.0.1 - - [27/Mar/2025 11:45:57] "POST /api/chat HTTP/1.1" 200 -
2025-03-27 12:03:11,563 - INFO - 127.0.0.1 - - [27/Mar/2025 12:03:11] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-03-27 12:03:11,566 - INFO - Received query: How do I know whether an AI system is high-risk?
2025-03-27 12:03:12,454 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-03-27 12:03:19,129 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-03-27 12:03:19,135 - INFO - Generated response: The documents do not provide specific criteria or a checklist for determining if an AI system is high-risk. However, they suggest that a high-risk AI system is one that may pose risks to health, safety, or fundamental rights. It might also be considered high-risk if there are foreseeable circumstances where misuse could lead to such risks. Technical robustness and the potential for harmful or undesirable behavior are also factors. Lastly, if the AI system has systemic risks, or if its development or use causes a serious incident, it may be considered high-risk. Please refer to the official EU AI Act for a comprehensive definition and criteria of high-risk AI systems.
2025-03-27 12:03:19,136 - INFO - 127.0.0.1 - - [27/Mar/2025 12:03:19] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:27:50,576 - INFO - Logging setup complete.
2025-05-05 23:27:50,576 - INFO - Logging setup complete.
2025-05-05 23:27:50,597 - INFO - Loading vector store from data/vector_store...
2025-05-05 23:27:50,598 - INFO - Loading faiss.
2025-05-05 23:27:50,843 - INFO - Successfully loaded faiss.
2025-05-05 23:27:50,845 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-05 23:27:50,850 - INFO - Vector store loaded successfully.
2025-05-05 23:27:50,886 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-05-05 23:27:50,886 - INFO - [33mPress CTRL+C to quit[0m
2025-05-05 23:27:50,967 - INFO -  * Restarting with watchdog (fsevents)
2025-05-05 23:27:51,468 - INFO - Logging setup complete.
2025-05-05 23:27:51,468 - INFO - Logging setup complete.
2025-05-05 23:27:51,499 - INFO - Loading vector store from data/vector_store...
2025-05-05 23:27:51,500 - INFO - Loading faiss.
2025-05-05 23:27:51,513 - INFO - Successfully loaded faiss.
2025-05-05 23:27:51,516 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-05 23:27:51,518 - INFO - Vector store loaded successfully.
2025-05-05 23:27:51,561 - WARNING -  * Debugger is active!
2025-05-05 23:27:51,570 - INFO -  * Debugger PIN: 141-822-538
2025-05-05 23:30:35,026 - INFO - 127.0.0.1 - - [05/May/2025 23:30:35] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:30:35,037 - INFO - Received query: hello
2025-05-05 23:30:35,039 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:30:37,998 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:30:38,058 - INFO - Generated response: As an AI, I'm ready to assist you. However, since there is no context provided about the EU AI Act, I would appreciate if you could specify what you want to know.
2025-05-05 23:30:38,059 - INFO - 127.0.0.1 - - [05/May/2025 23:30:38] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:30:47,544 - INFO - 127.0.0.1 - - [05/May/2025 23:30:47] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:30:47,548 - INFO - Received query: what is eu ai act?
2025-05-05 23:30:47,549 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:30:50,756 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:30:50,759 - INFO - Generated response: The EU AI Act is a proposed regulation by the European Union, aiming to safeguard fundamental EU rights and user safety by setting harmonised rules for the development, placement and use of artificial intelligence (AI) across the EU. The proposed Act covers aspects like transparency obligations, human oversight, and robustness requirements for high-risk AI systems, while also establishing fines for non-compliance.
2025-05-05 23:30:50,760 - INFO - 127.0.0.1 - - [05/May/2025 23:30:50] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:53:42,823 - INFO - 127.0.0.1 - - [05/May/2025 23:53:42] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:53:42,827 - INFO - Received query: What is EU AI Act?
2025-05-05 23:53:42,828 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:53:47,365 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:53:47,368 - INFO - Generated response: As an AI, I don't have personal experiences, but I can tell you that the EU AI Act is a proposed regulation by the European Union aimed at ensuring AI systems are used in a safe and trustworthy manner. The act sets strict standards and regulations for high-risk AI systems, includes provisions for transparency and human oversight, and establishes fines for non-compliance. The act is designed to protect fundamental rights and safety of EU citizens while allowing businesses and innovation to thrive.
2025-05-05 23:53:47,369 - INFO - 127.0.0.1 - - [05/May/2025 23:53:47] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:55:08,832 - INFO - 127.0.0.1 - - [05/May/2025 23:55:08] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:55:08,838 - INFO - Received query: What is EU AI Act?
2025-05-05 23:55:08,841 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:55:10,229 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:55:10,232 - INFO - Generated response: I'm sorry, but the context provided does not contain any information about the EU AI Act. As an AI, I rely on provided context to answer questions accurately.
2025-05-05 23:55:10,232 - INFO - 127.0.0.1 - - [05/May/2025 23:55:10] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:55:24,314 - INFO - 127.0.0.1 - - [05/May/2025 23:55:24] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:55:24,316 - INFO - Received query: What is EU AI Act?
2025-05-05 23:55:24,316 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:55:27,653 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:55:27,657 - INFO - Generated response: As an AI, I can tell you that the EU AI Act is a proposed regulation put forward by the European Commission in April 2021 to create a legal framework for artificial intelligence in the European Union. The legislation aims to ensure AI systems are safe and respect existing laws and values, while also fostering innovation. It covers AI applications and their uses in a wide range of sectors, and includes provisions for establishing European Artificial Intelligence Board.
2025-05-05 23:55:27,657 - INFO - 127.0.0.1 - - [05/May/2025 23:55:27] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:56:03,224 - INFO - 127.0.0.1 - - [05/May/2025 23:56:03] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:56:03,230 - INFO - Received query: What are the risk categories?
2025-05-05 23:56:03,231 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:56:05,031 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:56:05,033 - INFO - Generated response: I'm sorry, but the context provided doesn't give information about any risk categories.
2025-05-05 23:56:05,033 - INFO - 127.0.0.1 - - [05/May/2025 23:56:05] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:56:10,848 - INFO - 127.0.0.1 - - [05/May/2025 23:56:10] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:56:10,851 - INFO - Received query: Why do we need to regulate the use of Artificial Intelligence?
2025-05-05 23:56:10,852 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:56:14,523 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:56:14,525 - INFO - Generated response: Regulating the use of Artificial Intelligence is crucial for several reasons. Firstly, it ensures that AI systems respect existing laws, fundamental rights and democratic values. Secondly, it promotes accountability and transparency in AI applications, preventing biases and discrimination. Thirdly, it aims to guarantee the safety and accuracy of AI systems to prevent harm or any adverse impact on society. Lastly, it ensures that AI technology is used in a manner that boosts economic growth, competitiveness, and innovation while respecting individual and societal rights.
2025-05-05 23:56:14,526 - INFO - 127.0.0.1 - - [05/May/2025 23:56:14] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:56:27,897 - INFO - 127.0.0.1 - - [05/May/2025 23:56:27] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:56:27,902 - INFO - Received query: To whom does the AI Act apply?
2025-05-05 23:56:27,903 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:56:29,299 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:56:29,301 - INFO - Generated response: I don't know.
2025-05-05 23:56:29,302 - INFO - 127.0.0.1 - - [05/May/2025 23:56:29] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:56:33,485 - INFO - 127.0.0.1 - - [05/May/2025 23:56:33] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:56:33,488 - INFO - Received query: To whom does the AI Act apply?
2025-05-05 23:56:33,488 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:56:34,620 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:56:34,632 - INFO - Generated response: I'm sorry, but without a context provided, I cannot provide a specific answer to your question about the AI Act. Please provide more information.
2025-05-05 23:56:34,633 - INFO - 127.0.0.1 - - [05/May/2025 23:56:34] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:56:57,148 - INFO - 127.0.0.1 - - [05/May/2025 23:56:57] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:56:57,154 - INFO - Received query: To whom does the AI Act apply?
2025-05-05 23:56:57,156 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:56:58,272 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:56:58,276 - INFO - Generated response: I don't know.
2025-05-05 23:56:58,276 - INFO - 127.0.0.1 - - [05/May/2025 23:56:58] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:57:06,229 - INFO - 127.0.0.1 - - [05/May/2025 23:57:06] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:57:06,235 - INFO - Received query: "To whom does the EU AI Act apply?",
2025-05-05 23:57:06,236 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:57:07,596 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:57:07,598 - INFO - Generated response: I'm sorry, but I can't provide the answer because the context is missing.
2025-05-05 23:57:07,599 - INFO - 127.0.0.1 - - [05/May/2025 23:57:07] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:57:23,283 - INFO - 127.0.0.1 - - [05/May/2025 23:57:23] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:57:23,287 - INFO - Received query: What are the penalties for non-compliance with the EU AI Act?
2025-05-05 23:57:23,289 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:57:24,875 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:57:24,877 - INFO - Generated response: I'm sorry, but without the specific context related to the penalties for non-compliance with the EU AI Act, I'm unable to provide an accurate answer.
2025-05-05 23:57:24,878 - INFO - 127.0.0.1 - - [05/May/2025 23:57:24] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:57:41,676 - INFO - 127.0.0.1 - - [05/May/2025 23:57:41] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:57:41,680 - INFO - Received query: What is the EU AI Act?
2025-05-05 23:57:41,681 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:57:44,304 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:57:44,315 - INFO - Generated response: I'm sorry, but the context provided doesn't contain any information about the EU AI Act. However, generally, the EU AI Act is a legal framework proposed by the European Commission to regulate artificial intelligence in the European Union to ensure safety and fundamental rights of people and businesses.
2025-05-05 23:57:44,315 - INFO - 127.0.0.1 - - [05/May/2025 23:57:44] "POST /api/chat HTTP/1.1" 200 -
2025-05-05 23:58:17,310 - INFO - 127.0.0.1 - - [05/May/2025 23:58:17] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-05 23:58:17,318 - INFO - Received query: What is the EU AI Act?
2025-05-05 23:58:17,319 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-05 23:58:18,688 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-05 23:58:18,691 - INFO - Generated response: I'm sorry, but I can't provide the information you're looking for because the context you've given is empty.
2025-05-05 23:58:18,691 - INFO - 127.0.0.1 - - [05/May/2025 23:58:18] "POST /api/chat HTTP/1.1" 200 -
2025-05-20 15:04:46,006 - INFO - Logging setup complete.
2025-05-20 15:04:46,006 - INFO - Logging setup complete.
2025-05-20 15:04:46,027 - INFO - Loading vector store from data/vector_store...
2025-05-20 15:04:46,028 - INFO - Loading faiss.
2025-05-20 15:04:46,127 - INFO - Successfully loaded faiss.
2025-05-20 15:04:46,129 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-20 15:04:46,132 - INFO - Vector store loaded successfully.
2025-05-20 15:04:46,158 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-05-20 15:04:46,158 - INFO - [33mPress CTRL+C to quit[0m
2025-05-20 15:04:46,168 - INFO -  * Restarting with watchdog (fsevents)
2025-05-20 15:04:46,724 - INFO - Logging setup complete.
2025-05-20 15:04:46,724 - INFO - Logging setup complete.
2025-05-20 15:04:46,777 - INFO - Loading vector store from data/vector_store...
2025-05-20 15:04:46,778 - INFO - Loading faiss.
2025-05-20 15:04:46,787 - INFO - Successfully loaded faiss.
2025-05-20 15:04:46,788 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-20 15:04:46,791 - INFO - Vector store loaded successfully.
2025-05-20 15:04:46,814 - WARNING -  * Debugger is active!
2025-05-20 15:04:46,823 - INFO -  * Debugger PIN: 141-822-538
2025-05-20 15:05:48,361 - INFO - 127.0.0.1 - - [20/May/2025 15:05:48] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-20 15:05:48,364 - INFO - Received query: What is the EU AI Act?
2025-05-20 15:05:48,365 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-20 15:05:51,018 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-20 15:05:51,525 - INFO - Generated response: I'm sorry, but I can't provide the information you're looking for because the context is missing.
2025-05-20 15:05:51,526 - INFO - 127.0.0.1 - - [20/May/2025 15:05:51] "POST /api/chat HTTP/1.1" 200 -
2025-05-20 15:05:57,346 - INFO - 127.0.0.1 - - [20/May/2025 15:05:57] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-20 15:05:57,350 - INFO - Received query: How do I know whether an AI system is high-risk?
2025-05-20 15:05:57,351 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-20 15:05:59,359 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-20 15:05:59,362 - INFO - Generated response: I'm sorry, but I can't provide the information you're looking for because the context is missing.
2025-05-20 15:05:59,363 - INFO - 127.0.0.1 - - [20/May/2025 15:05:59] "POST /api/chat HTTP/1.1" 200 -
2025-05-20 15:06:32,265 - INFO - 127.0.0.1 - - [20/May/2025 15:06:32] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-20 15:06:32,268 - INFO - Received query: What is the purpose of the EU AI Act?
2025-05-20 15:06:32,271 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-20 15:06:36,558 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-20 15:06:36,561 - INFO - Generated response: As the given context is empty, I cannot provide an accurate answer to your question. However, generally speaking, the purpose of the EU AI Act is to provide a legal framework for artificial intelligence in the European Union. It aims to ensure that AI is used in a manner that is safe and respects fundamental rights, while also facilitating innovation and the growth of the digital economy.
2025-05-20 15:06:36,562 - INFO - 127.0.0.1 - - [20/May/2025 15:06:36] "POST /api/chat HTTP/1.1" 200 -
2025-05-20 15:07:40,624 - INFO - 127.0.0.1 - - [20/May/2025 15:07:40] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-20 15:07:40,633 - INFO - Received query: What are the penalties for non-compliance with the EU AI Act?
2025-05-20 15:07:40,636 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-20 15:07:43,341 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-20 15:07:43,613 - INFO - Generated response: I'm sorry, but I can't provide the answer since the context you've mentioned is blank. Please provide a relevant context about the EU AI Act's penalties for non-compliance.
2025-05-20 15:07:43,613 - INFO - 127.0.0.1 - - [20/May/2025 15:07:43] "POST /api/chat HTTP/1.1" 200 -
2025-05-20 15:08:59,145 - INFO - 127.0.0.1 - - [20/May/2025 15:08:59] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-20 15:08:59,150 - INFO - Received query: What is the EU AI Act?
2025-05-20 15:09:00,028 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-05-20 15:09:08,177 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-20 15:09:08,179 - INFO - Generated response: The EU AI Act is a regulatory framework proposed by the European Union for governing artificial intelligence (AI). The Act aims to address the new challenges brought by AI and to ensure an appropriate ethical and legal framework based on the Union's values and in line with the Charter of Fundamental Rights of the EU. This includes forthcoming guidance on existing product liability rules, a detailed analysis of emerging challenges, and cooperation with stakeholders for the development of AI technologies. The Act does not apply to AI systems or models developed solely for scientific research and development. The Act also aims to boost the EU's technological and industrial capacity and AI uptake across the economy, prepare for socio-economic changes brought about by AI, and address legal and ethical considerations.
2025-05-20 15:09:08,180 - INFO - 127.0.0.1 - - [20/May/2025 15:09:08] "POST /api/chat HTTP/1.1" 200 -
2025-05-20 15:09:28,894 - INFO - 127.0.0.1 - - [20/May/2025 15:09:28] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-20 15:09:28,897 - INFO - Received query: What is the purpose of the EU AI Act?
2025-05-20 15:09:28,960 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-05-20 15:09:35,350 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-20 15:09:35,354 - INFO - Generated response: The purpose of the EU AI Act is to ensure a coordinated approach to make the most of the opportunities offered by AI and to address the new challenges that it brings. The Act aims to boost the EU's technological and industrial capacity and AI uptake across the economy, prepare for socio-economic changes brought about by AI, and ensure an appropriate ethical and legal framework, based on the Union's values and in line with the Charter of Fundamental Rights of the EU.
2025-05-20 15:09:35,354 - INFO - 127.0.0.1 - - [20/May/2025 15:09:35] "POST /api/chat HTTP/1.1" 200 -
2025-05-28 13:41:28,538 - INFO - Logging setup complete.
2025-05-28 13:41:28,538 - INFO - Logging setup complete.
2025-05-28 13:41:28,560 - INFO - Loading vector store from data/vector_store...
2025-05-28 13:41:28,561 - INFO - Loading faiss.
2025-05-28 13:41:28,660 - INFO - Successfully loaded faiss.
2025-05-28 13:41:28,662 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-28 13:41:28,665 - INFO - Vector store loaded successfully.
2025-05-28 13:41:28,692 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-05-28 13:41:28,692 - INFO - [33mPress CTRL+C to quit[0m
2025-05-28 13:41:28,702 - INFO -  * Restarting with watchdog (fsevents)
2025-05-28 13:41:29,248 - INFO - Logging setup complete.
2025-05-28 13:41:29,248 - INFO - Logging setup complete.
2025-05-28 13:41:29,282 - INFO - Loading vector store from data/vector_store...
2025-05-28 13:41:29,283 - INFO - Loading faiss.
2025-05-28 13:41:29,290 - INFO - Successfully loaded faiss.
2025-05-28 13:41:29,293 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-28 13:41:29,297 - INFO - Vector store loaded successfully.
2025-05-28 13:41:29,329 - WARNING -  * Debugger is active!
2025-05-28 13:41:29,337 - INFO -  * Debugger PIN: 738-167-228
2025-05-28 13:41:53,859 - INFO - 127.0.0.1 - - [28/May/2025 13:41:53] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-28 13:41:53,863 - INFO - Received query: What is the EU AI Act?
2025-05-28 13:41:53,864 - ERROR - Failed to retrieve documents: [Errno 61] Connection refused
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
    yield
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 216, in handle_request
    raise exc from None
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 99, in handle_request
    raise exc
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_sync/connection.py", line 122, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_backends/sync.py", line 205, in connect_tcp
    with map_exceptions(exc_map):
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 61] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ranacoskun/rag-flask-app/backend/retriever.py", line 55, in retrieve
    results = self.docsearch.similarity_search(query, k=k)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 641, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 513, in similarity_search_with_score
    embedding = self._embed_query(query)
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_community/vectorstores/faiss.py", line 265, in _embed_query
    return self.embedding_function.embed_query(text)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 164, in embed_query
    return self.embed_documents([text])[0]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/langchain_ollama/embeddings.py", line 159, in embed_documents
    embedded_docs = self._client.embed(self.model, texts)["embeddings"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 262, in embed
    return self._request(
           ^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/ollama/_client.py", line 70, in _request
    response = self._client.request(method, url, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 837, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "/opt/anaconda3/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/opt/anaconda3/lib/python3.11/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 61] Connection refused
2025-05-28 13:41:55,693 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-28 13:41:55,713 - INFO - Generated response: As an AI, I must inform you that I cannot provide an answer to your question as no context was provided.
2025-05-28 13:41:55,715 - INFO - 127.0.0.1 - - [28/May/2025 13:41:55] "POST /api/chat HTTP/1.1" 200 -
2025-05-28 13:42:12,303 - INFO - 127.0.0.1 - - [28/May/2025 13:42:12] "OPTIONS /api/chat HTTP/1.1" 200 -
2025-05-28 13:42:12,307 - INFO - Received query: What is the EU AI Act?
2025-05-28 13:42:23,566 - INFO - HTTP Request: POST http://127.0.0.1:11434/api/embed "HTTP/1.1 200 OK"
2025-05-28 13:42:29,780 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-28 13:42:29,784 - INFO - Generated response: The EU AI Act is a regulatory framework put forward by the European Union to manage the development and application of artificial intelligence (AI) across its member states. The act aims to boost the EU's technological and industrial capacity, prepare for socio-economic changes brought about by AI, and ensure an appropriate ethical and legal framework. Some key aspects of this framework include investing in research and innovation, modernising education and training systems, and establishing a European AI Alliance. The framework emphasizes the importance of data protection, digital rights, and ethical standards. It also stipulates that it doesn't apply to AI systems developed solely for scientific research and development, or to research, testing, or development activities regarding AI systems or models prior to their market introduction.
2025-05-28 13:42:29,785 - INFO - 127.0.0.1 - - [28/May/2025 13:42:29] "POST /api/chat HTTP/1.1" 200 -
2025-05-28 13:43:45,172 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/chatter.py', reloading
2025-05-28 13:43:46,347 - INFO -  * Restarting with watchdog (fsevents)
2025-05-28 13:43:47,087 - INFO - Logging setup complete.
2025-05-28 13:43:47,088 - ERROR - OpenAI API key is not set.
2025-05-28 13:45:10,874 - INFO - Logging setup complete.
2025-05-28 13:45:10,874 - ERROR - OpenAI API key is not set.
2025-05-28 13:47:07,077 - INFO - Logging setup complete.
2025-05-28 13:47:07,078 - ERROR - OpenAI API key is not set.
2025-05-28 13:50:47,606 - INFO - Logging setup complete.
2025-05-28 13:50:47,606 - INFO - Logging setup complete.
2025-05-28 13:50:47,642 - INFO - Loading vector store from data/vector_store...
2025-05-28 13:50:47,644 - INFO - Loading faiss.
2025-05-28 13:50:47,663 - INFO - Successfully loaded faiss.
2025-05-28 13:50:47,668 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-28 13:50:47,675 - INFO - Vector store loaded successfully.
2025-05-28 13:50:47,718 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-05-28 13:50:47,718 - INFO - [33mPress CTRL+C to quit[0m
2025-05-28 13:50:47,723 - INFO -  * Restarting with watchdog (fsevents)
2025-05-28 13:50:48,239 - INFO - Logging setup complete.
2025-05-28 13:50:48,239 - INFO - Logging setup complete.
2025-05-28 13:50:48,271 - INFO - Loading vector store from data/vector_store...
2025-05-28 13:50:48,272 - INFO - Loading faiss.
2025-05-28 13:50:48,280 - INFO - Successfully loaded faiss.
2025-05-28 13:50:48,282 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-28 13:50:48,286 - INFO - Vector store loaded successfully.
2025-05-28 13:50:48,329 - WARNING -  * Debugger is active!
2025-05-28 13:50:48,338 - INFO -  * Debugger PIN: 738-167-228
2025-05-28 13:51:05,144 - INFO - Logging setup complete.
2025-05-28 13:51:05,144 - INFO - Logging setup complete.
2025-05-28 13:51:05,178 - INFO - Loading vector store from data/vector_store...
2025-05-28 13:51:05,178 - INFO - Loading faiss.
2025-05-28 13:51:05,188 - INFO - Successfully loaded faiss.
2025-05-28 13:51:05,191 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-28 13:51:05,196 - INFO - Vector store loaded successfully.
2025-05-28 13:51:05,232 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-05-28 13:51:05,232 - INFO - [33mPress CTRL+C to quit[0m
2025-05-28 13:51:05,234 - INFO -  * Restarting with watchdog (fsevents)
2025-05-28 13:51:05,731 - INFO - Logging setup complete.
2025-05-28 13:51:05,731 - INFO - Logging setup complete.
2025-05-28 13:51:05,771 - INFO - Loading vector store from data/vector_store...
2025-05-28 13:51:05,772 - INFO - Loading faiss.
2025-05-28 13:51:05,783 - INFO - Successfully loaded faiss.
2025-05-28 13:51:05,786 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-28 13:51:05,790 - INFO - Vector store loaded successfully.
2025-05-28 13:51:05,831 - WARNING -  * Debugger is active!
2025-05-28 13:51:05,837 - INFO -  * Debugger PIN: 738-167-228
2025-05-28 13:51:15,074 - INFO - Logging setup complete.
2025-05-28 13:51:15,074 - INFO - Logging setup complete.
2025-05-28 13:51:15,104 - INFO - Loading vector store from data/vector_store...
2025-05-28 13:51:15,105 - INFO - Loading faiss.
2025-05-28 13:51:15,112 - INFO - Successfully loaded faiss.
2025-05-28 13:51:15,113 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-28 13:51:15,115 - INFO - Vector store loaded successfully.
2025-05-28 13:51:15,147 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5001
2025-05-28 13:51:15,147 - INFO - [33mPress CTRL+C to quit[0m
2025-05-28 13:51:15,154 - INFO -  * Restarting with watchdog (fsevents)
2025-05-28 13:51:15,702 - INFO - Logging setup complete.
2025-05-28 13:51:15,702 - INFO - Logging setup complete.
2025-05-28 13:51:15,735 - INFO - Loading vector store from data/vector_store...
2025-05-28 13:51:15,736 - INFO - Loading faiss.
2025-05-28 13:51:15,742 - INFO - Successfully loaded faiss.
2025-05-28 13:51:15,744 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-28 13:51:15,746 - INFO - Vector store loaded successfully.
2025-05-28 13:51:15,776 - WARNING -  * Debugger is active!
2025-05-28 13:51:15,781 - INFO -  * Debugger PIN: 738-167-228
2025-05-28 13:52:40,076 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2025-05-28 13:52:41,225 - INFO -  * Restarting with watchdog (fsevents)
2025-05-28 13:52:41,746 - INFO - Logging setup complete.
2025-05-28 13:52:41,746 - INFO - Logging setup complete.
2025-05-28 13:52:41,776 - INFO - Loading vector store from data/vector_store...
2025-05-28 13:52:41,777 - INFO - Loading faiss.
2025-05-28 13:52:41,791 - INFO - Successfully loaded faiss.
2025-05-28 13:52:41,795 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-28 13:52:41,801 - INFO - Vector store loaded successfully.
2025-05-28 13:52:41,833 - WARNING -  * Debugger is active!
2025-05-28 13:52:41,842 - INFO -  * Debugger PIN: 738-167-228
2025-05-28 13:55:06,497 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2025-05-28 13:55:07,680 - INFO -  * Restarting with watchdog (fsevents)
2025-05-28 13:55:08,241 - INFO - Logging setup complete.
2025-05-28 13:55:08,241 - INFO - Logging setup complete.
2025-05-28 13:55:08,277 - INFO - Loading vector store from data/vector_store...
2025-05-28 13:55:08,278 - INFO - Loading faiss.
2025-05-28 13:55:08,290 - INFO - Successfully loaded faiss.
2025-05-28 13:55:08,295 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-28 13:55:08,298 - INFO - Vector store loaded successfully.
2025-05-28 13:55:08,323 - WARNING -  * Debugger is active!
2025-05-28 13:55:08,329 - INFO -  * Debugger PIN: 738-167-228
2025-05-28 13:56:21,785 - INFO -  * Detected change in '/Users/ranacoskun/rag-flask-app/backend/app.py', reloading
2025-05-28 13:56:22,938 - INFO -  * Restarting with watchdog (fsevents)
2025-05-28 13:56:23,484 - INFO - Logging setup complete.
2025-05-28 13:56:23,484 - INFO - Logging setup complete.
2025-05-28 13:56:23,542 - INFO - Loading vector store from data/vector_store...
2025-05-28 13:56:23,543 - INFO - Loading faiss.
2025-05-28 13:56:23,555 - INFO - Successfully loaded faiss.
2025-05-28 13:56:23,557 - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-05-28 13:56:23,560 - INFO - Vector store loaded successfully.
2025-05-28 13:56:23,584 - WARNING -  * Debugger is active!
2025-05-28 13:56:23,591 - INFO -  * Debugger PIN: 738-167-228
